<templateSet group="Jquery Function Files">
  <template name="file_textareaCount" value="/*&#10; * jQuery Textarea Characters Counter Plugin v 2.0&#10; * Examples and documentation at: http://roy-jin.appspot.com/jsp/textareaCounter.jsp&#10; * Copyright (c) 2010 Roy Jin&#10; * Version: 2.0 (11-JUN-2010)&#10; * Dual licensed under the MIT and GPL licenses:&#10; * http://www.opensource.org/licenses/mit-license.php&#10; * http://www.gnu.org/licenses/gpl.html&#10; * Requires: jQuery v1.4.2 or later&#10; */&#10;(function($){  &#10;&#9;$.fn.textareaCount = function(options, fn) {   &#10;&#9;&#9;var defaults = {  &#10;&#9;&#9;&#9;maxCharacterSize: -1,  &#10;&#9;&#9;&#9;originalStyle: 'originalTextareaInfo',&#10;&#9;&#9;&#9;warningStyle: 'warningTextareaInfo',  &#10;&#9;&#9;&#9;warningNumber: 20,&#10;&#9;&#9;&#9;displayFormat: '#input characters | #words words'&#10;&#9;&#9;};  &#10;&#9;&#9;var options = $.extend(defaults, options);&#10;&#9;&#9;&#10;&#9;&#9;var container = $(this);&#10;&#9;&#9;&#10;&#9;&#9;$(&quot;&lt;div class='charleft'&gt;&amp;nbsp;&lt;/div&gt;&quot;).insertAfter(container);&#10;&#9;&#9;&#10;&#9;&#9;//create charleft css&#10;&#9;&#9;var charLeftCss = {&#10;&#9;&#9;&#9;'width' : container.width()&#10;&#9;&#9;};&#10;&#9;&#9;&#10;&#9;&#9;var charLeftInfo = getNextCharLeftInformation(container);&#10;&#9;&#9;charLeftInfo.addClass(options.originalStyle);&#10;&#9;&#9;charLeftInfo.css(charLeftCss);&#10;&#9;&#9;&#10;&#9;&#9;var numInput = 0;&#10;&#9;&#9;var maxCharacters = options.maxCharacterSize;&#10;&#9;&#9;var numLeft = 0;&#10;&#9;&#9;var numWords = 0;&#10;&#9;&#9;&#9;&#9;&#10;&#9;&#9;container.bind('keyup', function(event){limitTextAreaByCharacterCount();})&#10;&#9;&#9;&#9;&#9; .bind('mouseover', function(event){setTimeout(function(){limitTextAreaByCharacterCount();}, 10);})&#10;&#9;&#9;&#9;&#9; .bind('paste', function(event){setTimeout(function(){limitTextAreaByCharacterCount();}, 10);});&#10;&#9;&#9;&#10;&#9;&#9;&#10;&#9;&#9;function limitTextAreaByCharacterCount(){&#10;&#9;&#9;&#9;charLeftInfo.html(countByCharacters());&#10;&#9;&#9;&#9;//function call back&#10;&#9;&#9;&#9;if(typeof fn != 'undefined'){&#10;&#9;&#9;&#9;&#9;fn.call(this, getInfo());&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;return true;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function countByCharacters(){&#10;&#9;&#9;&#9;var content = container.val();&#10;&#9;&#9;&#9;var contentLength = content.length;&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;//Start Cut&#10;&#9;&#9;&#9;if(options.maxCharacterSize &gt; 0){&#10;&#9;&#9;&#9;&#9;//If copied content is already more than maxCharacterSize, chop it to maxCharacterSize.&#10;&#9;&#9;&#9;&#9;if(contentLength &gt;= options.maxCharacterSize) {&#10;&#9;&#9;&#9;&#9;&#9;content = content.substring(0, options.maxCharacterSize); &#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;var newlineCount = getNewlineCount(content);&#10;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;// newlineCount new line character. For windows, it occupies 2 characters&#10;&#9;&#9;&#9;&#9;var systemmaxCharacterSize = options.maxCharacterSize - newlineCount;&#10;&#9;&#9;&#9;&#9;if (!isWin()){&#10;&#9;&#9;&#9;&#9;&#9; systemmaxCharacterSize = options.maxCharacterSize&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;if(contentLength &gt; systemmaxCharacterSize){&#10;&#9;&#9;&#9;&#9;&#9;//avoid scroll bar moving&#10;&#9;&#9;&#9;&#9;&#9;var originalScrollTopPosition = this.scrollTop;&#10;&#9;&#9;&#9;&#9;&#9;container.val(content.substring(0, systemmaxCharacterSize));&#10;&#9;&#9;&#9;&#9;&#9;this.scrollTop = originalScrollTopPosition;&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;charLeftInfo.removeClass(options.warningStyle);&#10;&#9;&#9;&#9;&#9;if(systemmaxCharacterSize - contentLength &lt;= options.warningNumber){&#10;&#9;&#9;&#9;&#9;&#9;charLeftInfo.addClass(options.warningStyle);&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;numInput = container.val().length + newlineCount;&#10;&#9;&#9;&#9;&#9;if(!isWin()){&#10;&#9;&#9;&#9;&#9;&#9;numInput = container.val().length;&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;numWords = countWord(getCleanedWordString(container.val()));&#10;&#9;&#9;&#9;&#9;&#10;&#9;&#9;&#9;&#9;numLeft = maxCharacters - numInput;&#10;&#9;&#9;&#9;} else {&#10;&#9;&#9;&#9;&#9;//normal count, no cut&#10;&#9;&#9;&#9;&#9;var newlineCount = getNewlineCount(content);&#10;&#9;&#9;&#9;&#9;numInput = container.val().length + newlineCount;&#10;&#9;&#9;&#9;&#9;if(!isWin()){&#10;&#9;&#9;&#9;&#9;&#9;numInput = container.val().length;&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#9;numWords = countWord(getCleanedWordString(container.val()));&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;return formatDisplayInfo();&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function formatDisplayInfo(){&#10;&#9;&#9;&#9;var format = options.displayFormat;&#10;&#9;&#9;&#9;format = format.replace('#input', numInput);&#10;&#9;&#9;&#9;format = format.replace('#words', numWords);&#10;&#9;&#9;&#9;//When maxCharacters &lt;= 0, #max, #left cannot be substituted.&#10;&#9;&#9;&#9;if(maxCharacters &gt; 0){&#10;&#9;&#9;&#9;&#9;format = format.replace('#max', maxCharacters);&#10;&#9;&#9;&#9;&#9;format = format.replace('#left', numLeft);&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;return format;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function getInfo(){&#10;&#9;&#9;&#9;var info = {&#10;&#9;&#9;&#9;&#9;input: numInput,&#10;&#9;&#9;&#9;&#9;max: maxCharacters,&#10;&#9;&#9;&#9;&#9;left: numLeft,&#10;&#9;&#9;&#9;&#9;words: numWords&#10;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;return info;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function getNextCharLeftInformation(container){&#10;&#9;&#9;&#9;&#9;return container.next('.charleft');&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function isWin(){&#10;&#9;&#9;&#9;var strOS = navigator.appVersion;&#10;&#9;&#9;&#9;if (strOS.toLowerCase().indexOf('win') != -1){&#10;&#9;&#9;&#9;&#9;return true;&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;return false;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function getNewlineCount(content){&#10;&#9;&#9;&#9;var newlineCount = 0;&#10;&#9;&#9;&#9;for(var i=0; i&lt;content.length;i++){&#10;&#9;&#9;&#9;&#9;if(content.charAt(i) == '\n'){&#10;&#9;&#9;&#9;&#9;&#9;newlineCount++;&#10;&#9;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;return newlineCount;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function getCleanedWordString(content){&#10;&#9;&#9;&#9;var fullStr = content + &quot; &quot;;&#10;&#9;&#9;&#9;var initial_whitespace_rExp = /^[^A-Za-z0-9]+/gi;&#10;&#9;&#9;&#9;var left_trimmedStr = fullStr.replace(initial_whitespace_rExp, &quot;&quot;);&#10;&#9;&#9;&#9;var non_alphanumerics_rExp = rExp = /[^A-Za-z0-9]+/gi;&#10;&#9;&#9;&#9;var cleanedStr = left_trimmedStr.replace(non_alphanumerics_rExp, &quot; &quot;);&#10;&#9;&#9;&#9;var splitString = cleanedStr.split(&quot; &quot;);&#10;&#9;&#9;&#9;return splitString;&#10;&#9;&#9;}&#10;&#9;&#9;&#10;&#9;&#9;function countWord(cleanedWordString){&#10;&#9;&#9;&#9;var word_count = cleanedWordString.length-1;&#10;&#9;&#9;&#9;return word_count;&#10;&#9;&#9;}&#10;&#9;};  &#10;})(jQuery);&#10;&#10;&#10;/*-----------Example----------*/&#10;/*&#10;&lt;style&gt;&#10;&#9;&#9;&#9;.overview {&#10;&#9;&#9;&#9;&#9;background: #FFEC9D;&#10;&#9;&#9;&#9;&#9;padding: 10px;&#10;&#9;&#9;&#9;&#9;width: 90%;&#10;&#9;&#9;&#9;&#9;border: 1px solid #CCCCCC;&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;.originalTextareaInfo {&#10;&#9;&#9;&#9;&#9;font-size: 12px;&#10;&#9;&#9;&#9;&#9;color: #000000;&#10;&#9;&#9;&#9;&#9;font-family: Tahoma, sans-serif;&#10;&#9;&#9;&#9;&#9;text-align: right&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;.warningTextareaInfo {&#10;&#9;&#9;&#9;&#9;font-size: 12px;&#10;&#9;&#9;&#9;&#9;color: #FF0000;&#10;&#9;&#9;&#9;&#9;font-family: Tahoma, sans-serif;&#10;&#9;&#9;&#9;&#9;text-align: right&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;&#10;&#9;&#9;&#9;#showData {&#10;&#9;&#9;&#9;&#9;height: 70px;&#10;&#9;&#9;&#9;&#9;width: 200px;&#10;&#9;&#9;&#9;&#9;border: 1px solid #CCCCCC;&#10;&#9;&#9;&#9;&#9;padding: 10px;&#10;&#9;&#9;&#9;&#9;margin: 10px;&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&lt;/style&gt;&#10;&#9;&#9;&#10;&#9;&#9;&lt;script src=&quot;js/textareaCounter.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;&#10;&#9;&#9;&lt;script type=&quot;text/javascript&quot;&gt;&#10;&#9;&#9;&#9;var info;&#10;&#9;&#9;&#9;$(document).ready(function(){&#10;&#9;&#9;&#9;&#9;var options = {&#10;&#9;&#9;&#9;&#9;&#9;'maxCharacterSize': -2,&#10;&#9;&#9;&#9;&#9;&#9;'originalStyle': 'originalTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;'warningStyle' : 'warningTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;'warningNumber': 40&#10;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;&#9;$('#testTextarea').textareaCount(options);&#10;&#10;&#9;&#9;&#9;&#9;var options2 = {&#10;&#9;&#9;&#9;&#9;&#9;&#9;'maxCharacterSize': 200,&#10;&#9;&#9;&#9;&#9;&#9;&#9;'originalStyle': 'originalTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;&#9;'warningStyle' : 'warningTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;&#9;'warningNumber': 40,&#10;&#9;&#9;&#9;&#9;&#9;&#9;'displayFormat' : '#input/#max | #words words'&#10;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;&#9;$('#testTextarea2').textareaCount(options2);&#10;&#10;&#9;&#9;&#9;&#9;var options3 = {&#10;&#9;&#9;&#9;&#9;&#9;&#9;'maxCharacterSize': 200,&#10;&#9;&#9;&#9;&#9;&#9;&#9;'originalStyle': 'originalTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;&#9;'warningStyle' : 'warningTextareaInfo',&#10;&#9;&#9;&#9;&#9;&#9;&#9;'warningNumber': 40,&#10;&#9;&#9;&#9;&#9;&#9;&#9;'displayFormat' : '#left Characters Left / #max'&#10;&#9;&#9;&#9;&#9;};&#10;&#9;&#9;&#9;&#9;$('#testTextarea3').textareaCount(options3, function(data){&#10;&#9;&#9;&#9;&#9;&#9;$('#showData').html(data.input + &quot; characters input. &lt;br /&gt;&quot; + data.left + &quot; characters left. &lt;br /&gt;&quot; + data.max + &quot; max characters. &lt;br /&gt;&quot; + data.words + &quot; words input.&quot;);&#10;&#9;&#9;&#9;&#9;});&#10;&#9;&#9;&#9;});&#10;&#9;&#9;&lt;/script&gt;&#10;&#9;&lt;/head&gt;&#10;&#9;&lt;body&gt;&#10;&#9;&#9;&#10;&#9;&#9;&lt;h2&gt;Only Count characters and words&lt;/h2&gt;&#10;&#9;&#9;&lt;textarea id=&quot;testTextarea&quot; cols=&quot;70&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;&#10;&#9;&#9;&lt;h2&gt;Count and limit characters, format the defined format display information&lt;/h2&gt;&#10;&#9;&#9;&lt;textarea id=&quot;testTextarea2&quot; cols=&quot;70&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;&#10;&#9;&#9;&lt;h2&gt;Count and limit characters and use the callback function&lt;/h2&gt;&#10;&#9;&#9;&lt;div id=&quot;showData&quot;&gt;&lt;/div&gt;&#10;&#9;&#9;&lt;textarea id=&quot;testTextarea3&quot; cols=&quot;70&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;&#10;&#9;&#9;&#10;&#9;&lt;/body&gt;&#10;&#9;*/ " description="textareaCount" toReformat="true" toShortenFQNames="true">
    <context>
      <option name="CSS" value="false" />
      <option name="HAML" value="false" />
      <option name="HTML" value="false" />
      <option name="JSP" value="false" />
      <option name="OTHER" value="true" />
      <option name="PHP" value="false" />
      <option name="SQL" value="false" />
      <option name="XML" value="false" />
    </context>
  </template>
</templateSet>